### YamlMime:DocDB
type: View
id: view.sales.vindividualcustomer
description: Individual customers (names and addresses) that purchase Adventure Works Cycles products online.
createdAt: 2023-05-08T12:07:39.4670000
lastModifiedAt: 2023-05-08T12:07:39.4670000
name: Sales.vIndividualCustomer
indexes: []
columns:
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.businessentityid
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: BusinessEntityID
  dataType: INT
  maxLengthBytes: 4
  precision: 10
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.title
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: Title
  dataType: NVARCHAR(8)
  maxLengthBytes: 8
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.firstname
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: FirstName
  dataType: NAME
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.middlename
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: MiddleName
  dataType: NAME
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.lastname
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: LastName
  dataType: NAME
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.suffix
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: Suffix
  dataType: NVARCHAR(10)
  maxLengthBytes: 10
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.phonenumber
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: PhoneNumber
  dataType: PHONE
  maxLengthBytes: 25
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.phonenumbertype
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: PhoneNumberType
  dataType: NAME
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.emailaddress
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: EmailAddress
  dataType: NVARCHAR(50)
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.emailpromotion
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: EmailPromotion
  dataType: INT
  maxLengthBytes: 4
  precision: 10
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.addresstype
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: AddressType
  dataType: NAME
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.addressline1
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: AddressLine1
  dataType: NVARCHAR(60)
  maxLengthBytes: 60
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.addressline2
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: AddressLine2
  dataType: NVARCHAR(60)
  maxLengthBytes: 60
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.city
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: City
  dataType: NVARCHAR(30)
  maxLengthBytes: 30
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.stateprovincename
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: StateProvinceName
  dataType: NAME
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.postalcode
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: PostalCode
  dataType: NVARCHAR(15)
  maxLengthBytes: 15
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.countryregionname
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: CountryRegionName
  dataType: NAME
  maxLengthBytes: 50
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
- type: ViewColumn
  id: view.sales.vindividualcustomer.column.demographics
  description: 
  createdAt: 0001-01-01T00:00:00.0000000
  lastModifiedAt: 0001-01-01T00:00:00.0000000
  name: Demographics
  dataType: INDIVIDUALSURVEYSCHEMACOLLECTION
  maxLengthBytes: -1
  precision: 0
  scale: 0
  isComputed: false
  computedText: ''
  isIdentity: false
  identityIncrement: 0
  identitySeed: 0
  inPrimaryKey: false
  isForeignKey: false
  default: 
  script: ""
script: |+
  SET ANSI_NULLS ON
  GO

  SET QUOTED_IDENTIFIER ON
  GO

  CREATE VIEW [Sales].[vIndividualCustomer]
  AS
  SELECT
      p.[BusinessEntityID]
      ,p.[Title]
      ,p.[FirstName]
      ,p.[MiddleName]
      ,p.[LastName]
      ,p.[Suffix]
      ,pp.[PhoneNumber]
  	,pnt.[Name] AS [PhoneNumberType]
      ,ea.[EmailAddress]
      ,p.[EmailPromotion]
      ,at.[Name] AS [AddressType]
      ,a.[AddressLine1]
      ,a.[AddressLine2]
      ,a.[City]
      ,[StateProvinceName] = sp.[Name]
      ,a.[PostalCode]
      ,[CountryRegionName] = cr.[Name]
      ,p.[Demographics]
  FROM [Person].[Person] p
      INNER JOIN [Person].[BusinessEntityAddress] bea
      ON bea.[BusinessEntityID] = p.[BusinessEntityID]
      INNER JOIN [Person].[Address] a
      ON a.[AddressID] = bea.[AddressID]
      INNER JOIN [Person].[StateProvince] sp
      ON sp.[StateProvinceID] = a.[StateProvinceID]
      INNER JOIN [Person].[CountryRegion] cr
      ON cr.[CountryRegionCode] = sp.[CountryRegionCode]
      INNER JOIN [Person].[AddressType] at
      ON at.[AddressTypeID] = bea.[AddressTypeID]
  	INNER JOIN [Sales].[Customer] c
  	ON c.[PersonID] = p.[BusinessEntityID]
  	LEFT OUTER JOIN [Person].[EmailAddress] ea
  	ON ea.[BusinessEntityID] = p.[BusinessEntityID]
  	LEFT OUTER JOIN [Person].[PersonPhone] pp
  	ON pp.[BusinessEntityID] = p.[BusinessEntityID]
  	LEFT OUTER JOIN [Person].[PhoneNumberType] pnt
  	ON pnt.[PhoneNumberTypeID] = pp.[PhoneNumberTypeID]
  WHERE c.StoreID IS NULL;

  GO

